<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>Tetris Cernadas</title>
<link rel="stylesheet" href="tetriscernadas.css">
</head>
<body>
<div id="app">
  <header id="home">
    <h1>Tetris Cernadas</h1>
    <img id="family-shield" src="assets/escudo.png" alt="Escudo de la familia Cernadas" class="shield">
    <div class="login">
      <input id="email" type="email" placeholder="Correo">
      <input id="password" type="password" placeholder="Contraseña">
      <button id="login-btn">Entrar / Registrar</button>
      <button id="logout-btn" class="hidden">Salir</button>
    </div>
  </header>

  <main id="game" class="hidden">
    <div class="top">
      <span>Jugador: <b id="player-name"></b></span>
      <span>Puntuación: <b id="score">0</b></span>
    </div>

    <canvas id="playfield"></canvas>

    <div id="touch-controls">
      <button data-act="left">←</button>
      <button data-act="rotate">⟳</button>
      <button data-act="right">→</button>
      <button data-act="down">↓</button>
      <button data-act="drop">⤓</button>
    </div>

    <div id="achievement"></div>
    <div id="ranking"></div>
  </main>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getDatabase } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  // Configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyC7HU_jVJBuTExGtplsN5cF52UAx5layp8",
    authDomain: "tetris-cernadas.firebaseapp.com",
    databaseURL: "https://tetris-cernadas-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "tetris-cernadas",
    storageBucket: "tetris-cernadas.firebasestorage.app",
    messagingSenderId: "272340801550",
    appId: "1:272340801550:web:b022455106d9ef5d15445f",
    measurementId: "G-EMES8LC3EE"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth();
  const db = getDatabase();

  // Hacemos las variables globales accesibles para tetriscernadas.js
  window.auth = auth;
  window.db = db;
</script>

<script type="module" src="tetriscernadas.js"></script>
</body>
</html>
